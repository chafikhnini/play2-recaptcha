# Recaptcha module for Play2!

Integrate challenge-response [reCaptcha](http://www.google.com/recaptcha) validations in 2 minutes.

## What is a Captcha?

A Captcha is a type of challenge-response test used in computing to ensure that the response is not generated by a computer. Captcha are typically used to fight spam and validate that a human is using the system.

![sample](http://www.google.com/recaptcha/static/images/smallCaptchaSpaceWithRoughAlpha.png "sample")

## Features

* 2 minutes integration guaranteed
* Industry standard Captcha engine [reCaptcha]([http://www.google.com/recaptcha](http://ww.google.com/recaptcha)
* Automatically detects language preference from the [Play Framework](http://www.playframework.org)
* Customizable theme, tabindex and language

## Prerequisites

The modules requires recapctha public/private keys for your domain. Those can be generated as follows:

1.  Go to [http://www.google.com/recaptcha](http://www.google.com/recaptcha)
2.  Register and create a site for your domain
3.  Write down the generated **public** and **private keys**

# Installation


## 1. Install the module dependency

Edit file `project/Build.scala` and adjust the following settings

```
val appDependencies = Seq(
  "crionics" %% "play2-recaptcha" % "1.0-SNAPSHOT"
)


val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
  resolvers += "Crionics Github Repository" at "http://orefalo.github.com/m2repo/releases/"
)
```

## 2. Add the Captcha tag to FORM elements

Adding a captcha is trivial: For every form, add `@recaptcha()` inside the form elements.

```
@import _root_.views.html.recaptcha.recaptcha

<form action="@routes.Application.process()" method="post">

   Please input your name
   <input name="name" />
   @recaptcha()
   <input type="submit"/>
</form>
```

### Customization

The tag takes the following parameters:

**theme**: The theme to use. Possible values are:red (default), white, blackglass, clean  

**tabindex**: Sets a tabindex for the reCAPTCHA text box. If other elements in the form use a tabindex, this should be set so that navigation is easier for the user  

**lang**: A two character country code. By default the module will ask Play to provide the negotiated language. possible values are: en,nl,fr,de,pt,ru,es,tr  

**https**: true / false. Optional parameter, default value is false. If true recaptcha is fetched via https, otherwise http([http://code.google.com/apis/recaptcha/docs/tips.html)](http://code.google.com/apis/recaptcha/docs/tips.html)).

See the [reCaptcha documentation](http://code.google.com/apis/recaptcha/docs/customization.html) for more details.



### 3. Validating the Captcha

Validating the captcha is equaly simple: the `@Recaptcha` Play validator is available.

```
import recaptcha.validator.Recaptcha;

public class FormData {
	
	@Recaptcha
	public String recaptcha;
	
	public String name;
}

public static Result process() {

	Form<FormData> form = form(FormData.class).bindFromRequest();

	if (form.hasErrors()) {
		return badRequest("recaptcha validation FAILED");
	} else {
		return ok("recaptcha validation PASSED");
	}
}
```


#Sample Application

A sample application is available, to run it:

1. clone the repository
2. cd sample
3. play run
4. open a browser to [localhost:9000](http://localhost:9000)



#Credits

* play2-recaptcha module by [Olivier Refalo](https://github.com/orefalo)
* This module is based on the [Recaptcha java
library](http://code.google.com/p/recaptcha/downloads/list?q=label:java-Latest).